# Cloudflare Worker Configuration for TR Story Submissions
# Deploy with: wrangler deploy

name = "tr-story-submission"
main = "story-submission-worker.js"
compatibility_date = "2024-02-07"

# Environment variables (set these via wrangler secret or dashboard)
[vars]
# OPENCLAW_HOOK_URL = "https://your-openclaw-gateway:PORT/hooks/agent"
# TELEGRAM_CHAT_ID = "6285846217"

# Secrets (use: wrangler secret put OPENCLAW_HOOK_TOKEN)
# OPENCLAW_HOOK_TOKEN = "your-secret-token-here"

# Routes - where this worker will respond
# Option 1: Simple subdomain (recommended)
[[routes]]
pattern = "api.tubbyretard.com/*"
custom_domain = true

# Option 2: Or use a regular route on your main domain:
# [[routes]]
# pattern = "tubbyretard.com/api/*"
# zone_id = "your-cloudflare-zone-id"

# KV Namespace (optional - for rate limiting or tracking submissions)
# [[kv_namespaces]]
# binding = "SUBMISSIONS"
# id = "your-kv-namespace-id"
